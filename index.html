<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Taylor Swift Song Recommender Bot</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #fdf6f9;
            margin: 0;
            padding: 0;
        }

        .chat-container {
            max-width: 600px;
            margin: 50px auto;
            background: #fff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .chat-header {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #c71585;
            margin-bottom: 20px;
        }

        .chat-messages {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .message {
            margin-bottom: 15px;
        }

        .user-message {
            text-align: right;
            color: #444;
        }

        .bot-message {
            text-align: left;
            color: #444;
        }

        .chat-input {
            display: flex;
        }

        .chat-input input {
            flex: 1;
            padding: 10px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .chat-input button {
            background: #c71585;
            color: #fff;
            border: none;
            padding: 10px 20px;
            margin-left: 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .chat-input button:hover {
            background: #a31470;
        }

        .typing-indicator {
            font-style: italic;
            color: #999;
            margin-top: 10px;
        }

        .song-recommendation {
            background: #f9e6f0;
            padding: 10px;
            border-radius: 8px;
            display: inline-block;
        }

        .song-title {
            font-weight: bold;
            color: #c71585;
        }

        .music-links {
            margin-top: 10px;
        }

        .music-link {
            display: inline-block;
            margin-right: 10px;
            text-decoration: none;
            color: #fff;
            background: #c71585;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 14px;
        }

        .music-link:hover {
            background: #a31470;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">Taylor Swift Song Recommender ðŸ’–</div>
        <div class="chat-messages" id="chatMessages"></div>
        <div class="typing-indicator" id="typingIndicator" style="display: none;">Typing...</div>
        <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Tell me how you're feeling..." />
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        const chatInput = document.getElementById('chatInput');
        const chatMessages = document.getElementById('chatMessages');
        const typingIndicator = document.getElementById('typingIndicator');

        const songDatabase = {
            happy: [
                { title: "Shake It Off", artist: "Taylor Swift" },
                { title: "You Belong With Me", artist: "Taylor Swift" },
                { title: "22", artist: "Taylor Swift" },
            ],
            sad: [
                { title: "All Too Well", artist: "Taylor Swift" },
                { title: "The Archer", artist: "Taylor Swift" },
                { title: "My Tears Ricochet", artist: "Taylor Swift" },
            ],
            angry: [
                { title: "Look What You Made Me Do", artist: "Taylor Swift" },
                { title: "Vigilante Shit", artist: "Taylor Swift" },
                { title: "Bad Blood", artist: "Taylor Swift" },
            ],
            nostalgic: [
                { title: "Enchanted", artist: "Taylor Swift" },
                { title: "Tim McGraw", artist: "Taylor Swift" },
                { title: "Back to December", artist: "Taylor Swift" },
            ],
            empowered: [
                { title: "The Man", artist: "Taylor Swift" },
                { title: "Bejeweled", artist: "Taylor Swift" },
                { title: "I Did Something Bad", artist: "Taylor Swift" },
            ]
        };

        function sendMessage() {
            const userMessage = chatInput.value.trim();
            if (!userMessage) return;

            // Display user message
            const userMessageDiv = document.createElement('div');
            userMessageDiv.classList.add('message', 'user-message');
            userMessageDiv.innerText = userMessage;
            chatMessages.appendChild(userMessageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            chatInput.value = '';
            typingIndicator.style.display = 'block';

            // Simulate thinking
            setTimeout(() => {
                const mood = detectMood(userMessage.toLowerCase());
                const songs = songDatabase[mood] || songDatabase["sad"];
                const song = songs[Math.floor(Math.random() * songs.length)];

                displayBotMessage(song, mood);
            }, 1000);
        }

        function detectMood(text) {
            const moodKeywords = {
                happy: ["happy", "joy", "excited", "cheerful", "good", "great"],
                sad: ["sad", "down", "depressed", "heartbroken", "blue", "crying"],
                angry: ["angry", "mad", "furious", "pissed", "raging"],
                nostalgic: ["nostalgic", "memory", "remember", "past", "childhood"],
                empowered: ["confident", "empowered", "strong", "independent", "badass"]
            };

            for (const [mood, keywords] of Object.entries(moodKeywords)) {
                if (keywords.some(word => text.includes(word))) {
                    return mood;
                }
            }

            return "sad"; // fallback mood
        }

        function displayBotMessage(song, mood) {
            typingIndicator.style.display = 'none';

            const botMessageDiv = document.createElement('div');
            botMessageDiv.classList.add('message', 'bot-message');
            
            const recommendation = document.createElement('div');
            recommendation.classList.add('song-recommendation');

            const title = document.createElement('div');
            title.classList.add('song-title');
            title.innerText = `ðŸŽ¶ ${song.title} by ${song.artist}`;

            const moodNote = document.createElement('p');
            moodNote.innerText = `Based on your vibe (${mood}), I think you'll love this.`;

            const links = document.createElement('div');
            links.classList.add('music-links');

            const spotifyLink = document.createElement('a');
            spotifyLink.href = `https://open.spotify.com/search/${encodeURIComponent(song.title + ' ' + song.artist)}`;
            spotifyLink.target = "_blank";
            spotifyLink.classList.add('music-link');
            spotifyLink.innerText = 'Spotify';

            const youtubeLink = document.createElement('a');
            youtubeLink.href = `https://www.youtube.com/results?search_query=${encodeURIComponent(song.title + ' ' + song.artist)}`;
            youtubeLink.target = "_blank";
            youtubeLink.classList.add('music-link');
            youtubeLink.innerText = 'YouTube';

            const appleLink = document.createElement('a');
            appleLink.href = `https://music.apple.com/us/search?term=${encodeURIComponent(song.title + ' ' + song.artist)}`;
            appleLink.target = "_blank";
            appleLink.classList.add('music-link');
            appleLink.innerText = 'Apple Music';

            links.append(spotifyLink, youtubeLink, appleLink);
            recommendation.append(title, moodNote, links);
            botMessageDiv.appendChild(recommendation);
            chatMessages.appendChild(botMessageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
    </script>
</body>
</html>
